<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{template}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <head>
        <script th:src="@{/js/jquery.mask.min.js}"></script>
        <script language="JavaScript">

            $(document).ready(function () {
                //$('#cdm').mask('99999-999');
                // $('#cdm').mask('0#', {maxlength: false});
                $('#cdm').mask("###0.00", {reverse: true});
                $('#dlog').mask("###0.00", {reverse: true});
                $('#sdc').mask("###0.00", {reverse: true});
                $('#preco').mask("###0.00", {reverse: true});
            });
            function enviarProduto() {

                if (document.getElementById("categoria").value == "") {
                    alert("Selecione uma categoria !");
                    document.getElementById("categoria").focus();
                    return false;
                }


                if (document.getElementById("codigo").value == "") {
                    alert("Preencha campo código produto corretamente!");
                    document.getElementById("codigo").focus();
                    return false;
                }


                if (document.getElementById("nomeproduto").value == "") {
                    alert("Preencha campo nome produto corretamente!");
                    document.getElementById("nomeproduto").focus();
                    return false;
                }



                if (document.getElementById("peso").value == "") {
                    alert("Preencha campo peso corretamente!");
                    document.getElementById("peso").focus();
                    return false;
                }

                if (document.getElementById("cubagem").value == "") {
                    alert("Preencha campo cubagem corretamente!");
                    document.getElementById("cubagem").focus();
                    return false;
                }

                if (document.getElementById("sdc").value == "") {
                    alert("Preencha campo preço sdc corretamente!");
                    document.getElementById("sdc").focus();
                    return false;
                }


                if (document.getElementById("cdm").value == "") {
                    alert("Preencha campo preço cdm corretamente!");
                    document.getElementById("cdm").focus();
                    return false;
                }

                if (document.getElementById("dlog").value == "") {
                    alert("Preencha campo preço dlog corretamente!");
                    document.getElementById("dlog").focus();
                    return false;
                }


                if (document.getElementById("caixa").value == "") {
                    alert("Preencha campo preço caixa corretamente!");
                    document.getElementById("caixa").focus();
                    return false;
                }
                return true;
            }
        </script>
    </head>

    <body>
        <section layout:fragment="content">

            <!--formulário-->
            <form class="form-horizontal" method="post" th:action="@{/produto}"  name="dados" onSubmit="return enviarProduto();">

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Cadastro de Produto </h3>
                    </div>

                    <input type="hidden" th:field="${produto.id}"/>
                    <div class="panel-body">

                        <div class="form-group">
                            <label for="status" class="col-sm-2 control-label">Selecione a Categoria</label>
                            <div class="col-sm-2">
                                <select id="categoria" th:field="${produto.categoria}" class="form-control" th:each="cat : ${categorias}">
                                    <option th:text="${cat.nome}" th:value="${cat.id}"></option>
                                </select>
                            </div>
                        </div>


                        <div class="form-group">
                            <label for="codigo" class="col-sm-2 control-label">Código</label>
                            <div class="col-sm-2">
                                <input type="text" th:field="${produto.codigo}" class="form-control" id="codigo" name="codigo"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="nomeproduto" class="col-sm-2 control-label">Nome do Produto</label>
                            <div class="col-sm-5">
                                <input type="text" th:field="${produto.nome}" class="form-control" id="nomeproduto" name="nomeproduto"/>
                            </div>
                        </div>


                        <div class="row detalheproduto"> 
                            <div class="col-sm-12">
                                <label for="descri" class="col-sm-2 control-label">Descrição do produto</label></br>             
                                <textarea class="form-control" th:field="${produto.descricao}" name="descri" id="descri" rows="10"></textarea>
                            </div>
                        </div>


                        <div class="form-group">
                            <label class="col-sm-2 control-label">Opções:</label>
                            </br>
                            <div class="col-sm-10">
                                <label><input th:field="${produto.profissional}" type="checkbox" name="notificaciones" value="profissional">Profissional</label> </br>
                                <label><input th:field="${produto.publicar}" type="checkbox" name="notificaciones" value="publicar">Publicar</label>
                            </div>
                        </div>



                        <div class="form-group">
                            <label for="preco" class="col-sm-2 control-label">Preço</label>
                            <div class="col-sm-1">
                                <input id="preco" type="text" th:field="${produto.preco}" th:value="${#numbers.formatDecimal(produto.preco, 1, 'DEFAULT', 2, 'DEFAULT')}" class="form-control" name="preco"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="peso" class="col-sm-2 control-label">Peso</label>
                            <div class="col-sm-1">
                                <input type="text" th:field="${produto.peso}" class="form-control" id="peso" name="peso"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="cubagem" class="col-sm-2 control-label">Cubagem</label>
                            <div class="col-sm-1">
                                <input type="text" th:field="${produto.cubagem}" class="form-control" id="cubagem" name="cubagem"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="sdc" class="col-sm-2 control-label">Preço SDC</label>
                            <div class="col-sm-1">
                                <input type="text" th:field="${produto.precoSDC}" class="form-control" id="sdc" name="sdc"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="cdm" class="col-sm-2 control-label">Preço CDM</label>
                            <div class="col-sm-1">
                                <input type="text" th:field="${produto.precoCDM}" class="form-control" id="cdm" name="cdm"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="dlog" class="col-sm-2 control-label">Preço Dlog</label>
                            <div class="col-sm-1">
                                <input type="text"th:field="${produto.precoDLOG}" class="form-control" id="dlog" name="dlog"/>
                            </div>
                        </div>


                        <div class="form-group">
                            <label for="caixa" class="col-sm-2 control-label">Qtd. por Caixa</label>
                            <div class="col-sm-1">
                                <input type="text" th:field="${produto.qtdcaixa}" class="form-control" id="caixa" name="caixa"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-primary">Gravar</button>
                            </div>

                        </div>

                    </div>
                </div>
            </form>
            <!--formulário-->
            <form class="form-horizontal">
                <div class="campobusca">
                    <div class="col-sm-3">
                        <input type="text" class="form-control filtro-input" id="busca" ng-model="busca" placeholder="Consulta Registro"/>
                    </div>
                </div>
                </br>
            </form>

            <table class="table table-striped table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Nome Produto</th>
                        <th>Profissional</th>
                        <th>Publicar</th>
                        <th>Preço</th>
                        <th>Peso</th>
                        <th>Cubagem</th>
                        <th>Preço SDC</th>
                        <th>Preço CDM</th>
                        <th>Preço DLOG</th>
                        <th>Qtd Por Caixa</th>
                        <th>Operações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="filtro-campo" th:each="p : ${produtos}">
                        <td th:text="${p.codigo}">{{registro.nomecdm}}</td>
                        <td th:text="${p.nome}">{{registro.estado}}</td>
                        <td th:text="${p.profissional}"></td>
                        <td th:text="${p.publicar}"></td>
                        <td th:text="${#numbers.formatDecimal(p.preco, 1, 'DEFAULT', 2, 'DEFAULT')}">{{registro.uf}}</td>
                        <td th:text="${p.peso}">{{registro.uf}}</td>
                        <td th:text="${#numbers.formatDecimal(p.cubagem, 1, 'DEFAULT', 2, 'DEFAULT')}">{{registro.cepinicial}}</td>
                        <td th:text="${#numbers.formatDecimal(p.precoSDC, 1, 'DEFAULT', 2, 'DEFAULT')}">{{registro.cepinicial}}</td>
                        <td th:text="${#numbers.formatDecimal(p.precoCDM, 1, 'DEFAULT', 2, 'DEFAULT')}">{{registro.cepfinal}}</td>
                        <td th:text="${#numbers.formatDecimal(p.precoDLOG, 1, 'DEFAULT', 2, 'DEFAULT')}">{{registro.bairro}}</td>
                        <td th:text="${p.qtdcaixa}">{{registro.cepinicial}}</td>
                        <td>
                            <form th:id="'formExcluir'+${p.id}" method="post" th:action="@{/produto/{id}(id=${p.id})}">
                                <a th:href="@{/produto/editar/{id}(id = ${p.id})}"  class="btn btn-warning">EDITAR</a> 

                                <input type="hidden" name="_method" value="DELETE" />
                                <button type="submit" class="btn btn-danger"
                                        th:onclick="'confirmarExclusao(event, '+${p.id}+', \''+''+'\')'">EXCLUIR</button>

                            </form>

                        </td>
                    </tr>
                </tbody>
            </table>
            <nav aria-label="Page navigation">
                <ul class="pagination">

                    <li th:each="pgn : ${paginas}" class="page-item">
                        <a class="page-link" th:href="@{/produto/{pg}(pg=${pgn})}" th:text="${pgn}">1</a>
                    </li>

                </ul>
            </nav>


        </section>
        <section layout:fragment="js-extra">
            <link rel="stylesheet" type="text/css" th:href="@{css/sweetalert/sweetalert.css}" media="screen,projection" />
            <script th:src="@{js/sweetalert/sweetalert.min.js}"></script>
            <script th:src="@{js/sweetalert/confirmacaoExclusao.js}"></script>
        </section>
    </body>
</html>
